(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{279:function(t,e,n){var r=n(277),o=n(273),i=n(278),a=n(270),s=n(281),c=n(282),u=n(283),l=(n(272),n(284),n(276));buildMenuItems=l.buildMenuItems,buildKeymap=l.buildKeymap,buildInputRules=l.buildInputRules,e.getPlugins=function(t){var e=[buildInputRules(t.schema),r.keymap(buildKeymap(t.schema,t.mapKeys)),r.keymap(i.baseKeymap),s.dropCursor(),c.gapCursor()];return t.menubar&&e.push(u.menuBar({floating:!1,content:buildMenuItems(t.schema).fullMenu.map(function(t){return t.filter(function(t){return t!==u.selectParentNodeItem})})})),e.push(o.history()),e.concat(new a.Plugin({props:{attributes:{class:"ProseMirror-example-setup-style"}}}))}},280:function(t,e,n){"use strict";function r(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(270),a=n(275),s=n(271),c=n(272),u=(n(276),new s.Schema({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},text:{group:"inline"},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}},marks:{link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function(t){return["a",t.attrs]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!=t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong"]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}}})),l=u=new s.Schema({nodes:Object(c.addListNodes)(u.spec.nodes,"paragraph block*","block"),marks:u.spec.marks}),p=n(279),f=n(273),d=function(t){return t.reduce(function(t,e){var n=t[t.length-1],r=n[n.length-1];return r?"insert"===r.method?n.push(e):t.push([e]):n.push(e),t},[[]])},h=function(t){var e=0,n=[],r=function(t,e,r){n.push({idx:t,node:e,method:r})},o=function t(n){if(n.content.size){var o=n.copy();r(e,o,"insert"),e++;var i=n.content.content;if("paragraph"===n.type.name||"heading"===n.type.name)!function(t){t.forEach(function(t){r(e,t,"replace"),e+=t.content.size})}(function(t){for(var e=new RegExp(/[(\.|\?|\!|\n|\r)]/,"gi"),n=t.textBetween(0,t.content.size,"|","%"),r=null,o=[];r=e.exec(n);)o.push(r.index);var i=0;if(!o.length)return[t.slice(0,t.content.size)];var a=o.map(function(e){var n=t.slice(i,e+1);return i=e+1,n});return a.push(t.slice(i,t.content.size)),a=a.filter(function(t){return t.content.content.length})}(n));else i.forEach(function(e){t(e)});e++}};return t.content.content.forEach(function(t){o(t)}),n},b=function(){return{type:"doc",content:[{type:"paragraph",content:[]}]}},m=function(){function t(e,n,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.post=e,this.shadow=new a.EditorView(r,{state:i.EditorState.create({doc:s.Node.fromJSON(l,e.fields.text?e.fields.text:b()),plugins:[Object(f.history)()]}),attributes:{class:"writango-post"}}),this.view=n,this.ops=h(this.shadow.state.doc),this.ops=d(this.ops),this.appliedOps=[]}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"applyOp",value:function(t){this.insertBlock(t.idx,t.node,t.method)}},{key:"insertBlock",value:function(t,e,n){if("insert"===n)var r=this.view.state.tr[n](t,e);else if("replace"===n)r=this.view.state.tr[n](t,t,e);r.scrollIntoView();var o=this.view.state.apply(r);this.view.updateState(o)}},{key:"undo",value:function(){var t=this.appliedOps.pop();this.ops.unshift(t);var e=t[0],n=this.view.state.tr.delete(e.idx,this.view.state.doc.content.size);n.scrollIntoView();var r=this.view.state.apply(n);this.view.updateState(r)}},{key:"next",value:function(){var t=this,e=this.ops.shift();e.forEach(function(e){t.applyOp(e)},this),this.appliedOps.push(e)}},{key:"prev",value:function(){this.undo()}},{key:"hasNext",value:function(){return this.ops.length}},{key:"hasPrev",value:function(){return this.appliedOps.length}}]),t}(),g=n(96);n.d(e,"a",function(){return v}),n.d(e,"b",function(){return m});var v={init:function(t,e){var n=Object(p.getPlugins)(function(t){for(var e=1;e<arguments.length;e++){var n=null==arguments[e]?{}:arguments[e],r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}({schema:l},e)),r={schema:l,plugins:n};r.doc=e.empty?s.Node.fromJSON(l,b()):s.Node.fromJSON(l,function(t){return t.fields.text?t.fields.text:Object(g.a)()}(e.post));var c={state:i.EditorState.create(r),attributes:{class:"writango-post"},editable:function(){return e.editable},createSelectionBetween:function(t,n,r){n==r?e.onDeselect&&e.onDeselect():e.onSelect&&e.onSelect()}};e.editable&&(c.dispatchTransaction=function(t){u.updateState(u.state.apply(t)),e.onChange(u.state.doc.toJSON())}),e.scrollMargin&&(c.scrollMargin={bottom:400}),e.scrollThreshold&&(c.scrollThreshold={bottom:600}),e.handleScrollToSelection&&(c.handleScrollToSelection=e.handleScrollToSelection);var u=new a.EditorView(t,c);return u},initTitleEditor:function(t,e){var n=new s.Schema({nodes:{text:{},doc:{content:"text*"}}}),r={schema:n,doc:s.Node.fromJSON(n,function(t){var e=Object(g.b)();return t.fields.title&&(e.content[0].text=t.fields.title),e}(e.post))},o={state:i.EditorState.create(r),attributes:{class:"writango-title"},editable:function(){return e.editable}};e.editable&&(o.dispatchTransaction=function(t){c.updateState(c.state.apply(t)),e.onChange(c.state.doc.toJSON())});var c=new a.EditorView(t,o);return c}}},290:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e);n(70);var c=n(45),u=n(0),l=n.n(u),p=n(11),f=n(280),d=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=i(this,a(e).call(this,t))).state={post:{}},n.editorDiv=l.a.createRef(),n.titleEditorDiv=l.a.createRef(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u.Component),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"componentWillMount",value:function(){var t=this;p.a.loadPost(this.props.match.params.username,this.props.match.params.postslug).then(function(){t.setState({post:p.a.currentDoc});var e=t.editorDiv.current,n=t.titleEditorDiv.current;window.editor=f.a.init(e,{post:t.state.post,editable:!1}),window.titleEditor=f.a.initTitleEditor(n,{post:t.state.post,editable:!1})}).catch(function(){})}},{key:"render",value:function(){return this.state.post.fields?l.a.createElement(c.a,{className:"writango-post-container",style:{minHeight:"100vh",border:"0",width:"800px",margin:"auto"}},l.a.createElement("div",{className:"prosemirror-title-div",ref:this.titleEditorDiv}),l.a.createElement("div",{className:"post-body"},l.a.createElement("div",{className:"prosemirror-div",ref:this.editorDiv}))):l.a.createElement("div",{style:{minHeight:"100vh",width:"800px",margin:"auto"}},l.a.createElement("p",null,"Sorry, either the requested post doesn't exist or you don't have necessary permissions to view the content."))}}]),e}();e.default=d}}]);